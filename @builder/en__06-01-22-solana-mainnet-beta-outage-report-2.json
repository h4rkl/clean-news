{
  "createdBy": "AmQlet2K3ihDy7VCo3GG4DPZBHl2",
  "createdDate": 1687362493530,
  "data": {
    "author": {
      "@type": "@builder.io/core:Reference",
      "id": "983ae1dad0ba4ca4ac6dd4ac310edee1_0fe0adbf9f1fc7f11a669e9e6b05ec533c948f70f16dc2807a1cc41f30073153",
      "model": "author"
    },
    "datePublished": 1654369200000,
    "image": "https://cdn.builder.io/api/v1/image/assets%2Fce0c7323a97a4d91bd0baa7490ec9139%2Fb3a5b2bcffe6479386c58c6516088a75?format=webp",
    "intro": "At approximately 16:30 UTC on Wednesday, June 1, Solana’s Mainnet Beta cluster\nceased producing blocks as result of stalled consensus, caused by a bug in the\ndurable nonce transactions feature. Over the next four and a half hours,\nvalidator operators worked to identify the point of furthest progress and\ncollectively instituted a restart of the network, which resulted in durable\nnonce transactions being temporarily disabled. Block production resumed at 21:00\nUTC the same day, and network operat",
    "openGraph": {
      "ogDescription": "\n\nAt approximately 16:30 UTC on Wednesday, June 1, Solana’s Mainnet Beta cluster\nceased producing blocks as result of stalled consensus, caused by a bug in the\ndurable nonce transactions feature. Over the next four and a half hours,\nvalidator operators worked to identify the point of furthest progress and\ncollectively instituted a restart of the network, which resulted in durable\nnonce transactions being temporarily disabled. Block production resumed at 21:00\nUTC the same day, and network operat",
      "ogImage": "https://cdn.builder.io/api/v1/image/assets%2Fce0c7323a97a4d91bd0baa7490ec9139%2F0ceebdc152d14001960c8f2862ebd7fe",
      "ogTitle": "06-01-22 Solana Mainnet Beta Outage Report",
      "ogType": [
        "article"
      ],
      "ogUrl": "https://www.solana.com/blog/06-01-22-solana-mainnet-beta-outage-report-2"
    },
    "publishedDate": "Sun Jun 05 2022 00:00:00 GMT+0500 (Pakistan Standard Time)",
    "seo": {
      "internalName": "06-01-22 Solana Mainnet Beta Outage Report",
      "noFollow": false,
      "noIndex": false,
      "seoDescription": "\n\nAt approximately 16:30 UTC on Wednesday, June 1, Solana’s Mainnet Beta cluster\nceased producing blocks as result of stalled consensus, caused by a bug in the\ndurable nonce transactions feature. Over the next four and a half hours,\nvalidator operators worked to identify the point of furthest progress and\ncollectively instituted a restart of the network, which resulted in durable\nnonce transactions being temporarily disabled. Block production resumed at 21:00\nUTC the same day, and network operat",
      "seoImage": "https://cdn.builder.io/api/v1/image/assets%2Fce0c7323a97a4d91bd0baa7490ec9139%2Fb3a5b2bcffe6479386c58c6516088a75?format=webp",
      "seoTitle": "06-01-22 Solana Mainnet Beta Outage Report"
    },
    "slug": "06-01-22-solana-mainnet-beta-outage-report-2",
    "tags": [
      {
        "tag": {
          "@type": "@builder.io/core:Reference",
          "id": "983ae1dad0ba4ca4ac6dd4ac310edee1_0efeeff01d314e61bdef318830eb1084",
          "model": "entity-blog-tags"
        }
      },
      {
        "tag": {
          "@type": "@builder.io/core:Reference",
          "id": "983ae1dad0ba4ca4ac6dd4ac310edee1_35de643c099d4efca470ba6ebd2547fb",
          "model": "entity-blog-tags"
        }
      }
    ],
    "title": {
      "@type": "@builder.io/core:LocalizedValue",
      "Default": "06-01-22 Solana Mainnet Beta Outage Report"
    },
    "twitterMeta": {
      "twitterDescription": "\n\nAt approximately 16:30 UTC on Wednesday, June 1, Solana’s Mainnet Beta cluster\nceased producing blocks as result of stalled consensus, caused by a bug in the\ndurable nonce transactions feature. Over the next four and a half hours,\nvalidator operators worked to identify the point of furthest progress and\ncollectively instituted a restart of the network, which resulted in durable\nnonce transactions being temporarily disabled. Block production resumed at 21:00\nUTC the same day, and network operat",
      "twitterImage": "https://cdn.builder.io/api/v1/image/assets%2Fce0c7323a97a4d91bd0baa7490ec9139%2F0ceebdc152d14001960c8f2862ebd7fe",
      "twitterTitle": "06-01-22 Solana Mainnet Beta Outage Report"
    },
    "blocks": [
      {
        "@type": "@builder.io/sdk:Element",
        "@version": 2,
        "id": "builder-08ca5f41f0714cce8c2dd2d77f1aea05",
        "component": {
          "name": "Section Molecule",
          "options": {
            "noPadding": "noPaddingY"
          },
          "isRSC": null
        },
        "children": [
          {
            "@type": "@builder.io/sdk:Element",
            "@version": 2,
            "id": "builder-88e2ec34156d4b0bbb234d8d9d13b871",
            "component": {
              "name": "Text",
              "options": {
                "text": "<p>At approximately 16:30 UTC on Wednesday, June 1, Solana’s Mainnet Beta cluster ceased producing blocks as result of stalled consensus, caused by a bug in the durable nonce transactions feature. Over the next four and a half hours, validator operators worked to identify the point of furthest progress and collectively instituted a restart of the network, which resulted in durable nonce transactions being temporarily disabled. Block production resumed at 21:00 UTC the same day, and network operators continued to restore client services over the next several hours.</p><p>Note: This issue was unrelated to improvements in 1.10 and 1.11. You can read more about these forthcoming improvements&nbsp;<a href=\"https://solana.com/news/04-30-22-solana-mainnet-beta-outage-report-mitigation?ref=solana.ghost.io\" rel=\"noopener noreferrer\" target=\"_blank\">here</a>.</p><h2><strong>What caused the outage?</strong></h2><p>A runtime bug triggered by the durable nonce transactions feature allowed, under a specific set of circumstances, for a failed durable nonce transaction to be processed twice. This led to nondeterminism, when a validator processed the transaction a second time and some nodes rejected the subsequent block, while others accepted it. Critically, more than 33% of validators accepted the block, but that number fell short of the 66% required to reconcile the nondeterminism.</p><h2><strong>How are nonce transactions supposed to work, and how are they different from normal transactions?</strong></h2><p>Solana utilizes parallel processing of non-overlapping transactions to greatly improve throughput. Networks that process transactions serially can use an incrementing nonce; Solana uses a different method to ensure transactions are not processed twice. For normal transactions, which make up over 99.99% of transactions on the Solana blockchain,&nbsp;the network utilizes a recent block hash and maintains a record of processed transactions within that window to ensure that duplicates are not processed.</p><p>Because&nbsp;<a href=\"https://docs.solana.com/offline-signing/durable-nonce?ref=solana.ghost.io#:~:text=Durable%20transaction%20nonces%20are%20a,read%20about%20in%20the%20proposal.\" rel=\"noopener noreferrer\" target=\"_blank\">durable nonce transactions</a>&nbsp;are designed to not expire, they require a different mechanism to prevent double processing, and are processed serially. Such transactions use an on-chain value specific to each account that is rotated every time a durable nonce transaction is processed. After the value is rotated, the same durable nonce transaction should not be able to be processed again.</p><p><br></p><h2><strong>What happened?</strong></h2><p>The processing of a durable nonce transaction in a specific set of circumstances revealed a bug in the runtime that prevented the network from advancing. This bug required the durable nonce transaction to have failed, and would not have been triggered by a successful transaction.</p><p><br></p><p><br></p><ul><li>The durable nonce transaction was processed while its blockhash was still recent enough for the transaction to be processed as a normal transaction</li><li>Seeing a recent blockhash, the runtime assumed it was processing a normal transaction, not a durable nonce transaction</li><li>This transaction failed and since it was not processed as a durable transaction, processing did not advance the on-chain nonce value as intended</li><li>Because the failed transaction was successfully added to a block, its transaction fees were paid</li><li>After the durable transaction was processed once and failed, it was still able to be processed again as a durable transaction because the nonce value it referenced had not been advanced and was still usable.</li><li><br></li></ul><p>After the failed transaction was processed, but before the nonce was used again, the user resubmitted the same transaction for processing. This resubmission activated the bug in the runtime.&nbsp;</p><ul><li>The failed durable nonce transaction was re-submitted to the cluster</li><li>The block producer incorrectly accepted this transaction into the block it was building, because the nonce value on-chain had not been advanced</li><li>When validators validated the block, a portion found the new block included a transaction that had previously been processed, caused by the inclusion of this durable nonce transaction.</li><li>One set of validators rejected the block, while another set accepted the block, because the previous instance of the transaction was no longer in their recently processed cache.</li><li>Critically, more than 33% of validators accepted the block, but that number fell short of the 66% required to reconcile the nondeterminism.</li><li><br></li></ul><h2><strong>What is being done?</strong></h2><p>The durable nonce transaction feature was disabled in releases v1.9.28/v1.10.23 to prevent the network from halting if the same situation were to arise again. Durable nonce transactions will not process until&nbsp;<a href=\"https://github.com/solana-labs/solana/pull/25744?ref=solana.ghost.io\" rel=\"noopener noreferrer\" target=\"_blank\">the mitigation</a>&nbsp;has been applied, and the feature re-activated in a forthcoming release.</p>"
              },
              "isRSC": null
            },
            "responsiveStyles": {
              "large": {
                "display": "flex",
                "flexDirection": "column",
                "position": "relative",
                "flexShrink": "0",
                "boxSizing": "border-box",
                "marginTop": "20px",
                "lineHeight": "normal",
                "height": "auto"
              }
            }
          }
        ],
        "responsiveStyles": {
          "large": {
            "display": "flex",
            "flexDirection": "column",
            "position": "relative",
            "flexShrink": "0",
            "boxSizing": "border-box"
          }
        }
      }
    ],
    "state": {
      "deviceSize": "large",
      "location": {
        "path": "",
        "query": {}
      }
    }
  },
  "firstPublished": 1687554589427,
  "folders": [],
  "id": "983ae1dad0ba4ca4ac6dd4ac310edee1_e1e83ba7f41c41098ba187d0395b873b",
  "lastUpdated": 1749844336225,
  "lastUpdatedBy": "IsYMyhraRRSsIhQE3qs2nOc6KkV2",
  "meta": {
    "componentsUsed": {
      "Section Molecule": 1
    },
    "hasLinks": false,
    "kind": "component",
    "lastPreviewUrl": "https://solana.com/news/06-01-22-solana-mainnet-beta-outage-report-2?builder.space=ce0c7323a97a4d91bd0baa7490ec9139&builder.user.permissions=read%2Ccreate%2Cpublish%2CeditCode%2CeditDesigns%2Cadmin%2CeditLayouts%2CeditLayers%2CeditContentPriority%2CeditFolders&builder.user.role.name=Admin&builder.user.role.id=admin&builder.cachebust=true&builder.preview=post&builder.noCache=true&builder.allowTextEdit=true&__builder_editing__=true&builder.overrides.post=e1e83ba7f41c41098ba187d0395b873b&builder.overrides.e1e83ba7f41c41098ba187d0395b873b=e1e83ba7f41c41098ba187d0395b873b&builder.options.includeRefs=true&builder.options.enrich=true&builder.options.locale=Default"
  },
  "modelId": "983ae1dad0ba4ca4ac6dd4ac310edee1_cae3647488a54a1f8ffd55aa9b31c4b5",
  "name": "06-01-22 Solana Mainnet Beta Outage Report",
  "previewUrl": "https://solana.com/news/06-01-22-solana-mainnet-beta-outage-report-2",
  "published": "published",
  "query": [],
  "screenshot": "https://cdn.builder.io/api/v1/image/assets%2Fce0c7323a97a4d91bd0baa7490ec9139%2F91ce85993319433a899b69e7820299ee",
  "testRatio": 1,
  "variations": {},
  "@originId": "e1e83ba7f41c41098ba187d0395b873b",
  "@originOrgId": "ce0c7323a97a4d91bd0baa7490ec9139",
  "@originModelId": "cae3647488a54a1f8ffd55aa9b31c4b5",
  "@liveSyncEnabled": true,
  "rev": "2oemt8k4o9i"
}